<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 

    <!-- Vendor CSS -->
   

    <!-- Main CSS -->
    <link rel="stylesheet" href="../assets/css/bootstrap.css">
    <link rel="stylesheet" href="../assets/css/style.css">


</head>

<body>

<div class="hide1"></div>
<div class="hide2"></div>
<div class="hide3"></div>
<iframe src="../menu.html" seamles scrolling="no"  allowtransparency="true" ></iframe>

<div class="text_block">

<h1>Создание системы костей и Bone Tool</h1>
<p style="font-weight:bold;">
Система костей типа Bones
</p>
<p>
Не всякую анимационную задачу можно решить с помощью готовых bip-файлов,
и тогда вместо объекта типа Biped приходится создавать систему костей вручную.
</br>Система объектов типа Bones (Кости) создается для анимации персонажа, уже
имеющего готовую сеточную модель, и в процессе формирования кости размещаются внутри сетки тела персонажа. Кости представляют собой специальные объекты,
которые хорошо подходят для оснастки любого персонажа и автоматически связываются при создании. Последовательность связанных костей называется цепью. Две
или более цепей, связанных или соединенных вместе, образуют иерархию костей.
Кость считается направленной от ее базовой точки к следующей дочерней кости
в цепи. Ее длина определяется расстоянием между костями.
</br>В построенной цепочке костей самым старшим объектом-предком становится первая из созданных костей, а самым младшим — последняя из них. Чтобы перемещаться вверх или вниз по иерархии, можно пользоваться клавишами <Page Up>
и <Page Down>.
</p>
<p>
Анимация костей может выполняться по методу как прямой, так и обратной кинематики. Для анимации по методу обратной кинематики костям системы после их
создания назначают один из типов решателей, называемых IK-решателями. 
</p>
<p style="font-weight:bold;">
Создание системы костей
</p>
</p>
Для создания системы костей на командной панели Create нажмите кнопку Systems
(Системы) и в свитке Object Type (Тип объекта) выберите инструмент Bones
(Кости). На командной панели появятся свитки IK Chain Assignment (Назначение
цепи инверсной кинематики) и Bone Parameters (Параметры кости).
</p>
  <div  style="text-align: center;">
<img width="40%" src="../assets/images/ani_theory/3_1.jpg">
</div><p></p>
<p>
В свитке IK Chain Assignment (Назначение цепи инверсной кинематики) оставьте
отключенным флажок Assign To Children, при этом решатели инверсной кинематики к цепочке строящихся костей автоматически не применяются. Нужный решатель готовой цепочке костей можно назначить после ее создания.
В области Bone Object (Основные параметры кости) укажите размеры поперечного
сечения костей Width (Ширина) и Height (Высота), которые вы будете строить,
а в области Bone Fins (Выступы на костях) укажите размеры выступов. В данном
случае Width — это размер кости в плоскости, перпендикулярной той, в которой
происходит ее построение. Если вы строите кости, например, на виде Front, то там
данный размер вы не увидите. Однако он будет виден в окнах проекций Top и Left.
Height — это размер кости в плоскости ее построения, поэтому он будет виден
в этой плоскости.</p>
<p>
Последовательно щелкая и перемещая указатель мыши, в окне Front создайте цепочку костей; длина каждой кости определяется перемещением указателя мыши.
</br>Для завершения создания цепочки костей щелкните правой кнопкой мыши. При
этом на конце цепочки появится дополнительная небольшая кость.
</p>
<p>
Скелет персонажа обычно содержит несколько ветвящихся цепочек костей. Цепочку костей можно наращивать, создавая ответвления от любой кости цепочки. Снова
активизируйте команду Bones (Кости), щелкните кнопкой мыши на кости Bone03
и постройте аналогичную цепочку костей с противоположной стороны. Все кости
новой цепочки становятся дочерними по отношению к той кости, от конца которой
было выполнено ответвление. Создайте еще два новых ответвления от самой верхней кости для рук персонажа.
</p>
  <div  style="text-align: center;">
<img width="60%" src="../assets/images/ani_theory/3_2.jpg">
</div><p></p>
  <div  style="text-align: center;">
<img width="30%" src="../assets/images/ani_theory/3_3.jpg">
</div><p></p>
<p>
Закончив построение системы костей, щелкните правой кнопкой мыши, чтобы выключить режим создания костей. Выделите верхнюю кость и в области Name and
Color (Имя и цвет) введите ее новое имя — Head_Bone (Голова), аналогично для
большой средней кости — Spine_Bone (Позвоночник), для нижней — Pelvis_Bone
(Таз). Левое плечо (кость Bone16) назовите Shoulder_Left, а правое плечо (кость
Bone 12) назовите Shoulder_Right.
</p>
<p style="font-weight:bold;">
Редактирование системы костей
</p>
<p>
Чтобы после создания костей изменить их параметры, на главной панели инструментов выполните команду Animation (Анимация) | Bone Tools (Инструменты моделирования костей). В открывшемся окне Bone Tools содержатся свитки Bone
Editing Tools (Инструменты редактирования костей), Fin Adjustment Tools (Инструменты настройки ребер) и Object Properties (Свойства объекта).
</p>
  <div  style="text-align: center;">
<img width="60%" src="../assets/images/ani_theory/3_4.jpg">
</div><p></p>
<p>
Для изменения длины отдельной кости в свитке Bone Editing Tools (Инструменты
редактирования костей) нажмите кнопку Bone Edit Mode (Режим редактирования
кости). Затем активизируйте инструмент Select and Move и выделите редактируемую кость. Теперь вы можете перемещать ее опорную точку, одновременно меняя
длину редактируемой кости и ее родительской кости. Для выключения режима перемещения опорной точки снова нажмите кнопку Bone
Edit Mode (Режим редактирования кости). 
</p>
  <div  style="text-align: center;">
<img width="40%" src="../assets/images/ani_theory/3_5.jpg">
</div><p></p>
<p>
Для редактирования размеров костей не следует пользоваться инструментами масштабирования (Scale), расположенными на главной панели инструментов, поскольку в дальнейшем это может привести к непредсказуемым результатам.
</br>В свитке Bone Editing Tools имеются и другие команды для создания и редактирования иерархической цепочки костей. Например, активизируйте команду Refine
(Детализировать) и щелкните мышью в любой промежуточной точке построенной
ранее кости. В результате в этой точке она разобьется на две кости.
</p>
  <div  style="text-align: center;">
<img width="40%" src="../assets/images/ani_theory/3_6.jpg">
</div><p></p>
<p>
Команда Remove Bone (Удалить кость) удаляет выделенную кость и автоматически редактирует иерархическую цепочку костей. Команда Delete Bone (Удалить
кость) удаляет выделенную кость, разрывая цепочку костей на части.
Свиток Fin Adjustment Tools (Инструменты регулировки выступов) позволяет для
каждой кости настроить размеры боковых ребер (Side Fins), переднего ребра
(Front Fin) и заднего ребра (Back Fin). 
</p>
<p style="font-weight:bold;">
Поведение системы костей по правилам кинематики
</p>
<p>
Если к цепочке связанных между собой костей не применено никакого решателя
инверсной кинематики, то для нее действуют правила инверсной кинематики. Это
значит, что перемещение или поворот корневой кости (в данном случае кости Head
Bone) приведет к изменению положения всей системы костей. Поворот любой кости, имеющей дочерние (например, кости Bone04), вызовет поворот всех дочерних
костей цепочки. При этом действуют правила прямой кинематики.
Перемещение любой кости не ведет к ее отрыву от цепочки, а заставляет поворачиваться в своем суставе кость, родительскую по отношению к перемещаемой.
</br>В этом случае действуют правила инверсной кинематики. Выделите, например,
кость Bone04 и с помощью команды Select and Move сместите ее вправо.  Вместе с ней по законам инверсной кинематики сместится вправо и ее
родительская кость Pelvis Bone. Вслед за костью Pelvis Bone по законам прямой
кинематики сместятся вправо все остальные ее дочерние кости (Bone08, Bone09,
Bone10, Bone11). 
</p>
  <div  style="text-align: center;">
<img width="50%" src="../assets/images/ani_theory/3_7.jpg">
</div><p></p>
<p style="font-weight:bold;">
Назначение решателя HI Solver
</p>
<p>
Каждой цепочке костей можно назначить один или несколько решателей инверсной кинематики. Назначим цепочке костей решатель HI Solver (Независящий от
предыстории решатель инверсной кинематики). Опять откройте файл Puppet2.max.
</br>Чтобы назначить решатель, выделите кость Bone04 на левой ноге персонажа, на
главной панели инструментов выполните команду Animation | IK Solvers | HI
Solver и щелкните мышью на кости Bone06.
</p>

  <div  style="text-align: center;">
<img width="40%" src="../assets/images/ani_theory/3_9.jpg">
</div><p></p>

<p>
В окне проекции этот решатель изображается в виде линий белого цвета, проходящих вдоль осей тех костей, которые подпадают под действие решателя. Еще одна
линия, проходящая от конца последней дочерней кости к началу первой родительской кости, замыкает цепь действия решателя. Плоскость, в которой лежит образованный этими линиями треугольник, называется плоскостью сгиба (swivel plane).
</br>На конце младшей из охваченных решателем дочерних костей (кости Bone05)
в виде перекрестия изображается объект, называемый Goal (Цель). Именно этот
объект и следует перемещать или анимировать, чтобы привести в движение цепочку костей, охваченных действием решателя. Весь набор элементов решателя получил имя IK Chain001, которое и будет отображаться в строке имени объекта. 
</p>
<p style="font-weight:bold;">
Принцип действия решателя HI Solver
</p>
<p>
При перемещении объекта-цели (фактически вы должны перемещать голубое перекрестие с именем IK Chain01) вся система костей, охваченная действием решателя, будет поворачиваться относительно опорной точки старшей из управляемых
решателем костей (кости Bone04).
</br>Пара связанных костей Bone04 и Bone05 примет положение, соответствующее новому положению объекта-цели. Изгиб в суставе между костями Bone04 и Bone05
будет происходить в плоскости сгиба. По умолчанию сгибы суставов системы костей происходят в плоскости того окна проекции, в котором создавались кости. Остальные дочерние кости, в данном случае Bone06 и Bone07, будут подтягиваться за
объектом-целью, следуя правилам прямой кинематики. 
</p>
  <div  style="text-align: center;">
<img width="60%" src="../assets/images/ani_theory/3_10.jpg">
</div><p></p>

<p>
К одной и той же цепочке костей можно применить несколько решателей инверсной кинематики. Примените решатель HI Solver к правой ноге системы костей от
кости Bone08 до кости Bone10. Затем назначьте еще два таких же решателя между
костями Shoulder_Left и Bone18, а также между костями Shoulder_Right и Bone14.
</br>Теперь мы имеем четыре назначенных решателя.
</br>Если необходимо ограничить перемещение отдельных звеньев системы костей, то
выберите нужную кость и на панели Hierarchy (Иерархия) включите команду
IK (Инверсная кинематика). После этого в свитках Sliding Joints (Скользящее соединение) и Rotational Joints (Вращательное соединение) установите соответствующие ограничения. 
</p>
  
     <div class="next_link">
 
  <ul>
 <li><a href="ani_theory1.html">Риггинг и анимация</a></li>
 <li><a href="ani_theory2.html">3D анимация</a></li>
      <li><a href="ani_theory3.html">Bone Tool</a> </li>
  </ul>

    <ul >

 	<li><a href="ani_theory4.html">Skin и Weight</a> </li>
  <li><a href="ani_theory6.html">Ключевые кадры</a> </li>
      <li><a href="ani_theory7.html">Curve editor</a> </li>
  </ul>
  
 </div>
 
</div> 

<footer>
</footer>

 <script src="../assets/js/main.js"></script>
</body>

</html>